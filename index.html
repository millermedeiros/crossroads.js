<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
        <meta name="viewport" content="width=device-width; initial-scale=1.0;">
        <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="style/main.css">
        <title>Crossroads.js: JavaScript Routes System</title>
        <script type="text/javascript">
          var _gaq = _gaq || [];
          if(document.location.hostname.indexOf('millermedeiros.github.com') !== -1) _gaq.push(['_setAccount', 'UA-1247729-19']); //safeguard against dumb source code copy breaking metrics
          _gaq.push(['_trackPageview']);
          _gaq.push(['_trackPageLoadTime']);
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
    </head>
    <body>
        <div id="wrapper">
            <h1 class="ir logo">Crossroads.js: JavaScript Routes System</h1>
            <div class="ribbon big">
                <div class="innerwrapper">
                    <p>
                        <strong>Crossroads.js</strong> is a routing library inspired by URL Route/Dispatch utilities present on
                        frameworks like <a href="http://guides.rubyonrails.org/routing.html">Rails</a>,
                        <a href="http://docs.pylonsproject.org/projects/pyramid/dev/narr/urldispatch.html">Pyramid</a>,
                        <a href="http://docs.djangoproject.com/en/dev/topics/http/urls/">Django</a>,
                        <a href="http://book.cakephp.org/view/945/Routes-Configuration">CakePHP</a>,
                        <a href="http://codeigniter.com/user_guide/general/routing.html">CodeIgniter</a>, etc... It parses a string input and  decides which
                        action should be executed by matching the string against multiple patterns.
                    </p>
                    <p>
                        It is a <strong>powerful</strong> and <strong>flexible</strong> routing system. If used properly it can reduce code complexity by
                        decoupling objects and also by abstracting navigation paths and server requests.
                    </p>
                </div>
            </div>
            <section id="introduction">
                <div class="innerwrapper">
                    <h2>Why?</h2>
                    <p>
                        JavaScript applications are becoming bigger and more complex each day and it is hard to keep control
                        of what should be loaded/executed at each section.
                    </p>
                    <p>
                        Most of the back-end frameworks already provide some sort of routes or URL dispatch system but it usually requires
                        a strict structure that limits the flexibility of the code, specially since it is directly related with the server request
                        and calling actions on specific kinds of classes/objects <small>(like views or controllers)</small>.
                    </p>
                    <p>
                        <strong>Crossroads.js</strong> was built with flexibility in mind and with the goal to be used as a standalone utility which can be plugged
                        into any application and other libraries or frameworks to allow easy and robust URL dispatch.
                    </p>
                    <p>
                        One of the main differences of <strong>Crossroads.js</strong> is that it uses plain strings for the routing system which means it can be
                        used to route URLs, server requests or simply as a messaging system across your application. It also means that
                        <strong>Crossroads.js</strong> doesn't do things that it isn't supposed to do like updating the window.location, loading data or changing
                        the application state unless you want to. &mdash; <strong>A routes system shouldn't do anything else besides routing.</strong>
                    </p>
                    <p>
                        It also has many advanced features to enable easy and robust mapping of strings to actions that aren't present
                        on most JavaScript solutions.
                    </p>
                    <hr />

                    <h2>Why isn't it a plugin for one of the famous JS Libraries/Frameworks?</h2>
                    <p>
                        Extending a library to do things it isn't supposed to do and that are not directly related with its core goal defeats
                        the <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Principle</a> and is
                        considered a bad practice besides its broad use.
                    </p>
                    <p>
                        DOM manipulation libraries should be used only for manipulating the DOM. Routing libraries shouldn't do anything
                        besides routing...
                    </p>
                    <blockquote class="cite">
                        <em>A duck can walk, fly and swim, but he can't do any of these things well...</em>
                    </blockquote>
                    <p>
                        Another reason for not extending an existing library/framework is that the amount of code reused would be so minimal
                        that it doesn't pay-off the flexibility loss. <strong>It means that you can use Crossroads.js with "any" other library/framework.</strong>
                    </p>
                    <hr />

                    <h2>Dependencies</h2>
                    <p>
                        The only dependency is <a href="http://millermedeiros.github.com/js-signals/">JS-Signals</a> which is used for the event
                        system to allow greater flexibility and also to provide advanced features that wouldn't be available with simple callbacks.
                        Although JS-Signals dependency can be easily removed if needed.
                    </p>
                    <hr />

                    <h2>Should I use it for every kind of project?</h2>
                    <p>
                        <strong>Certainly no.</strong> If your project have just a few static pages a simple switch statement may be enough to solve your
            problems, but as applications start to grow and you have a slightly more complex <em>flow</em>, having a system that supports
                        dynamic variable parsing and a flexible validation schema may help you to reduce the overhead of doing those things manually
                        and also reduce chance of errors.
                    </p>
                    <p>
                        I consider the main target to be single page applications with complex navigation paths and also large websites that shares
            the same JS files across multiple pages or would <a href="http://blog.millermedeiros.com/2011/05/single-entry-point-ftw/">benefit from this kind of approach</a>. It is also very useful for server-side
                        and RESTful applications.
                    </p>
                    <hr />

                    <h2>Reliable &amp; Easy to Maintain</h2>
                    <p>
                        <strong>Crossroads.js</strong> source code is <a href="https://github.com/millermedeiros/crossroads.js/blob/master/dist/crossroads.js">clean and well structured</a>, meaning that it is easy to maintain.
                        It is also fully unit-tested to ensure that code works as expected on different scenarios and that future updates won't break existing features by accident.
                    </p>
                    <hr />

                    <h2>License</h2>
                    <p>
                        This project is released under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a>.
                    </p>
                    <hr />

                    <h2>Bugs / Feature Requests</h2>
                    <p>
                        Use github <a href="https://github.com/millermedeiros/crossroads.js/issues">issue tracker</a> to submit bugs and feature requests.
                    </p>
                    <hr />

                    <h2>Author</h2>
                    <p>
                        <a href="http://blog.millermedeiros.com/">Miller Medeiros</a>
                    </p>
                    <hr />

                    <h2>Saving history state &amp; updating browser URL</h2>
                    <p>If you are using Crossroads in the browser you may also need a library to handle history state changes. <a href="https://github.com/millermedeiros/hasher/">Hasher</a> is a "sibling" library designed to work together with Crossroads.js, both follow the same principles and use JS-Signals for the event dispatch. Example:</p>
<pre class="brush: js; gutter:false; toolbar:false">
//setup crossroads
crossroads.addRoute('foo');
crossroads.addRoute('lorem/ipsum');
crossroads.routed.add(console.log, console); //log all routes

//setup hasher
function parseHash(newHash, oldHash){
  crossroads.parse(newHash);
}
hasher.initialized.add(parseHash); //parse initial hash
hasher.changed.add(parseHash); //parse hash changes
hasher.init(); //start listening for history change

//update URL fragment generating new history record
hasher.setHash('lorem/ipsum');
</pre>

                </div>
            </section>
            <section id="documentation">
                <div class="ribbon">
                    <h1 class="innerwrapper">Documentation</h1>
                </div>
                <div class="innerwrapper">
                    <p>
                        <strong>Crossroads.js</strong> can be used as a regular JS file creating a global <code>crossroads</code> variable,
                        an AMD module which doesn’t generate any global variables and also as a CommonJS module. You can use the same
                        distribution file for all the environments <small>(since v0.6.0)</small>.
                    </p>
                    <hr />

                    <h2 class="h2-1" id="api">API</h2>
                    <nav class="clearfix">
                        <ul class="col col-1_2 code">
                            <li><a href="#crossroads-add_route">crossroads.addRoute()</a></li>
                            <li><a href="#crossroads-remove_route">crossroads.removeRoute()</a></li>
                            <li><a href="#crossroads-remove_all_routes">crossroads.removeAllRoutes()</a></li>
                            <li><a href="#crossroads-parse">crossroads.parse()</a></li>
                            <li><a href="#crossroads-get_num_routes">crossroads.getNumRoutes()</a></li>
                            <li><a href="#crossroads-bypassed">crossroads.bypassed</a></li>
                            <li><a href="#crossroads-routed">crossroads.routed</a></li>
                            <li><a href="#crossroads-create">crossroads.create()</a></li>
                            <li><a href="#crossroads-normalize_fn">crossroads.normalizeFn</a></li>
                            <li><a href="#crossroads-should_typecast">crossroads.shouldTypecast</a></li>
                            <li><a href="#crossroads-version">crossroads.VERSION</a></li>
                        </ul>
                        <ul class="col col-1_2 code">
                            <li><a href="#route-matched">Route.matched</a></li>
                            <li><a href="#route-switched">Route.switched</a></li>
                            <li><a href="#route-rules">Route.rules</a></li>
                            <li><a href="#route-greedy">Route.greedy</a></li>
                            <li><a href="#route-dispose">Route.dispose()</a></li>
                            <li><a href="#route-match">Route.match()</a></li>
                        </ul>
                    </nav>
                    <hr />

                    <h3 class="code" id="crossroads-add_route">crossroads.addRoute(<em>pattern, [handler], [priority]</em>)<em>:Route</em></h3>
                    <p>Creates a new route pattern listener and add it to crossroads routes collection.</p>
                    <h4>Parameters</h4>
                    <dl class="simpleList doc">
                        <dt><code>pattern</code><em>:String|RegExp</em></dt>
                            <dd>
                                String pattern or Regular Expression that should be used to match against requests.
                            </dd>
                            <dd>
                                If pattern is a String it can contain named variables surrounded by <code>"{}"</code> that will be evaluated
                                and passed to handlers as parameters. Each pattern segment is limited by the <code>"/"</code> char, so named variables will
                                match anything until it finds a <code>"/"</code> char or the next string token located after the variable.
                            </dd>
                            <dd>
                                The pattern <code>"{foo}/{bar}"</code> will match <code>"lorem/ipsum-dolor"</code> but won't match <code>"lorem/ipsum-dolor/sit"</code>.
                                                A single trailing slash at the end of the request is ignored, so <code>{foo}/</code> matches same requests as <code>{foo}</code>. - If you need to
                                match segments that may contain "/" use a regular expression instead of a string pattern.
                            </dd>
                            <dd>
                                A pattern can also have optional segments, which should be surrounded by <code>"::"</code> (e.g. <code>"news/:foo:/:bar:"</code> will match <code>"news"</code>, <code>"news/123"</code> and <code>"news/123/asd"</code>)
                            </dd>
                            <dd>
                                If pattern is a RegExp, capturing groups will be passed as parameters to handlers on the same order as they were matched.
                            </dd>
                            <dd>
                                It also allows "rest" segments (ending with <code>*</code>) which can match multiple segments. Rest segments can be optional and/or required and don't need to be the last segment of the pattern. The pattern <code>"{foo}/:bar*:"</code> will match <code>news</code> <code>"news/123"</code>, <code>"news/123/bar"</code>, <code>"news/123/lorem/ipsum"</code>.
                            </dd>
                        <dt><code>[handler]</code><em>:Function (optional)</em></dt>
                            <dd>
                                Function that should be executed when a request matches the Route pattern.
                                <small>(This is just a convenient way to attach a handler to the <a href="#route-matched">Route.matched</a> Signal)</small>
                            </dd>
                        <dt><code>[priority]</code><em>:Number (optional)</em></dt>
                            <dd>
                                Route execution priority.
                            </dd>
                            <dd>
                                Routes with higher priority will be tested before during <a href="#crossroads-parse">crossroads.parse</a>.
                                It is important to note that crossroads will stop pattern tests as soon as
                                it finds a Route that matches the request. Setting the priority is a way to invert
                                “natural” test order. Routes are tested by order of creation if priority is omitted.
                            </dd>
                    </dl>
                    <h4>Return</h4>
                    <p>
                        <code>addRoute</code> returns a <code>Route</code> object.
                    </p>
                    <h4>Example</h4>
<pre class="brush: js; gutter:false; toolbar:false">
//String rule with param:
//match '/news/123' passing "123" as param to handler
var route1 = crossroads.addRoute('/news/{id}', function(id){
  console.log(id);
});

//String rule with optional param:
//match '/foo/123/bar' passing "123" and "bar" as param
//match '/foo/45' passing 45 as param (slug is optional)
var route2 = crossroads.addRoute('/foo/{id}/:slug:');
//addRoute returns a Route object
route2.matched.add(console.log, console);

//RegExp rule:
//match '/lorem/ipsum' passing "ipsum" as param to handler
//note the capturing group around segment
var route3 = crossroads.addRoute(/^\/lorem\/([a-z]+)$/, function(id){
  console.log(id);
});

//String rule with rest segments:
//match '/foo/123/edit' passing "123" as argument
//match '/foo/45/asd/123/edit' passing "45/asd/123" as argument
var route4 = crossroads.addRoute('/foo/{id*}/edit');
//addRoute returns a Route object
route4.matched.add(console.log, console);
</pre>
                    <hr />

                    <h3 class="code" id="crossroads-remove_route">crossroads.removeRoute(<em>route</em>)</h3>
                    <p>Remove a single route from crossroads collection.</p>
                    <h4>Parameters</h4>
                    <dl class="simpleList doc">
                        <dt><code>route</code><em>:Route</em></dt>
                            <dd>
                                Reference to the <code>Route</code> object returned by <a href="#crossroads-add_route">crossroads.addRoute()</a>.
                            </dd>
                    </dl>
                    <p class="small em">
                        PS: It is important to note that Route object will be destroyed during removal so trying to call any method or accessing any
                        property of the Route object will throw errors.
                    </p>
                    <hr />

                    <h3 class="code" id="crossroads-remove_all_routes">crossroads.removeAllRoutes()</h3>
                    <p>Remove all routes from crossroads collection.</p>
                    <p class="small em">
                        PS: It is important to note that Route object will be destroyed during removal so trying to call any method or accessing any
                        property of the Route object will throw errors.
                    </p>
                    <hr />

                    <h3 class="code" id="crossroads-parse">crossroads.parse(<em>request[, defaultArgs]</em>)</h3>
                    <p>
                        Parse a string input and dispatch <a href="#route-matched">matched</a> Signal of the <strong>first</strong> Route that matches the request.
                    </p>
                    <p>
                        Routing priority is defined by order or insertion or by the <code>priority</code> parameter of the <a href="#crossroads-add_route">crossroads.addRoute</a> method.
                    </p>
                    <h4>Parameters</h4>
                    <dl class="simpleList doc">
                        <dt><code>request</code><em>:String</em></dt>
                            <dd>
                                String that should be evaluated and matched against Routes to define which Route handlers should be executed and
                                which parameters should be passed to the handlers.
                            </dd>
                        <dt><code>[defaultArgs]</code><em>:Array (optional)</em></dt>
                            <dd>
                                Array containing values passed to matched/routed/bypassed signals as first arguments. Useful for node.js in case you need to access the <code>request</code> and <code>response</code> objects.
                            </dd>
                    </dl>
                    <h4>Example</h4>
<pre class="brush: js; gutter:false; toolbar:false">
var sectionRoute = crossroads.addRoute('/{section}/{id}');
function onSectionMatch(section, id){
  console.log(section +' - '+ id);
}
sectionRoute.matched.add(onSectionMatch);
//will match `sectionRoute` passing "news" and `123` as param
crossroads.parse('/news/123');
</pre>
<pre class="brush: js; gutter:false; toolbar:false">
var sectionRoute = crossroads.addRoute('/{section}/{id}');
function onSectionMatch(foo, bar, section, id){
  console.log(foo +' - '+ bar +' - '+ section +' - '+ id);
}
sectionRoute.matched.add(onSectionMatch);
//will match `sectionRoute` and pass "lorem" and "ipsum" as first arguments
crossroads.parse('/news/123', ["lorem", "ipsum"]);
</pre>
                    <hr />

                    <h3 class="code" id="crossroads-get_num_routes">crossroads.getNumRoutes()<em>:Number</em></h3>
                    <p>Get number of Routes contained on the crossroads collection.</p>
                    <hr />

                    <h3 class="code" id="crossroads-bypassed">crossroads.bypassed<em>:Signal</em></h3>
                    <p>
                        Signal dispatched every time that <a href="#crossroads-parse">crossroads.parse</a> can't find a Route that matches the request.
                        Useful for debuging and error handling.
                    </p>
                    <h4>Signal Handler Parameters</h4>
                    <dl class="simpleList doc">
                        <dt><code>request</code><em>:String</em></dt>
                            <dd>
                                String passed to the crossroads.parse method.
                            </dd>
                    </dl>
<h4>Example</h4>
<pre class="brush: js; gutter:false; toolbar:false">
var route1 = crossroads.addRoute('/news/{id}');
crossroads.bypassed.add(function(request){
    console.log(request);
});
//won't match any route, triggering `bypassed` Signal
crossroads.parse('/foo');
</pre>
                    <hr />

                    <h3 class="code" id="crossroads-routed">crossroads.routed<em>:Signal</em></h3>
                    <p>
                        Signal dispatched every time that <a href="#crossroads-parse">crossroads.parse</a> find
                        a Route that matches the request.
                        Useful for debuging and for executing tasks that should happen at each routing.
                    </p>
                    <h4>Signal Handler Parameters</h4>
                    <dl class="simpleList doc">
                        <dt><code>request</code><em>:String</em></dt>
                            <dd>
                                String passed to the <a href="#crossroads-parse">crossroads.parse</a> method.
                            </dd>
                        <dt><code>data</code><em>:Object</em></dt>
                            <dd>
                                Object containing additional info about routed request. <small>(since v0.7)</small>
                                <dl class="simpleList doc">
                                    <dt><code>route</code><em>:Route</em></dt>
                                        <dd>
                                            Route object that matches the string request.
                                        </dd>
                                    <dt><code>params</code><em>:Array</em></dt>
                                        <dd>
                                            Array containing all the parameters captured by Route pattern.
                                        </dd>
                                    <dt><code>isFirst</code><em>:Boolean</em></dt>
                                        <dd>
                                            If it is the first time <code>crossroads.routed</code> is being
                                            dispatched for the same <code>crossroads.parse()</code> call.
                                            - Will be false unless route is <a href="#route-greedy">greedy</a> and
                                            it is being matched after another route did already matched request.
                                        </dd>
                                </dl>
                            </dd>
                    </dl>
<h4>Example</h4>
<pre class="brush: js; gutter:false; toolbar:false">
var route1 = crossroads.addRoute('/news/{id}');
crossroads.routed.add(function(request, data){
    console.log(request);
    console.log(data.route +' - '+ data.params +' - '+ data.isFirst);
});
crossroads.parse('/news/123'); //match `route1`, triggering `routed` Signal
</pre>
                    <hr />

                    <h3 class="code" id="crossroads-create">crossroads.create()<em>:Router</em></h3>
                    <p>
                        Create a new independent Router instance. The instance shares same API as <code>crossroads</code> but won't share any properties, so adding a new Route to the created Router won't add the route to the crossroads object and vice-versa. <small>(crossroads is just an instance of the Router object)</small>
                    </p>
<h4>Basic Example</h4>
<pre class="brush: js; gutter:false; toolbar:false">
var otherRouter = crossroads.create();
otherRouter.addRoute('/news/{id}', function(id){
    console.log(id);
});
otherRouter.parse('/news/123');
</pre>
<h4>Chain Routers</h4>
<p>
    Since Crossroads uses JS-Signals for the event system it is easy to chain multiple Routers together.
</p>
<pre class="brush: js; gutter:false; toolbar:false">
crossroads.routed.add(otherRouter.parse, otherRouter);
crossroads.bypassed.add(otherRouter.parse, otherRouter);
</pre>
                    <hr />

                    <h3 class="code" id="crossroads-normalize_fn">crossroads.normalizeFn<em>:Function</em></h3>
                    <p>
                        Sets a default function that should be used to normalize parameters before passing them to the <a href="#route-matched">Route.matched</a>,
                        works similarly to <a href="#route-rules">Route.rules.normalize_</a>.
                    </p>
                    <p>
                        <code>normalizeFn</code> should return an Array with parameters that should be dispatched by <a href="#route-matched">Route.matched</a> Signal.
                    </p>
                    <p>
                        <strong>Important:</strong> It will be bypassed if Route have a <code>rules.normalize_</code>.
                    </p>
                    <p>
                        The 2 most common normalizations are are provided as static properties <code>crossroads.NORM_AS_ARRAY</code> and <code>crossroads.NORM_AS_OBJECT</code>.
                    </p>
<h4>Example</h4>
<pre class="brush: js; gutter:false; toolbar:false">
crossroads.normalizeFn = crossroads.NORM_AS_OBJECT;
crossroads.addRoute('/{foo}/{bar}', function(vals){
    //can access captured values as object properties
    console.log(vals.foo +' - '+ vals.bar);
});
crossroads.parse('/lorem/ipsum');
</pre>
<pre class="brush: js; gutter:false; toolbar:false">
crossroads.normalizeFn = crossroads.NORM_AS_ARRAY;
crossroads.addRoute('/{foo}/{bar}', function(vals){
    //can access captured values as Array items
    console.log(vals[0] +' - '+ vals[1]);
});
crossroads.parse('/dolor/amet');
</pre>
<pre class="brush: js; gutter:false; toolbar:false">
crossroads.normalizeFn = function(request, vals){
    //make sure first argument is always "news"
    return ['news', vals.id];
};
crossroads.addRoute('/{cat}/{id}', function(cat, id){
    console.log(cat +' - '+ id);
});
crossroads.parse('/article/123');
</pre>

                    <hr />

                    <h3 class="code" id="crossroads-should_typecast">crossroads.shouldTypecast<em>:Boolean</em></h3>
                    <p>
                        Set if crossroads should typecast route paths. Default value is <code>false</code> <small>(<b>IMPORTANT:</b> on v0.5.0 it was <code>true</code> by default)</small>.
                    </p>
                    <p>
                        Note that you need to set this property for each Router returned by the <a href="#crossroads-create">crossroads.create()</a> since all Routers have <code>false</code> as the default value.
                    </p>
                    <h4>Typecasted values</h4>
                    <ul class="simpleList">
                        <li>&quot;true&quot;</li>
                        <li>&quot;false&quot;</li>
                        <li>&quot;null&quot;</li>
                        <li>&quot;undefined&quot;</li>
                        <li>numeric values</li>
                    </ul>
<h4>Example</h4>
<pre class="brush: js; gutter:false; toolbar:false">
crossroads.shouldTypecast = true; //default = false
crossroads.addRoute('/news/{id}', function(id){
    console.log(id); // 12 (remove trailing zeroes since it's typecasted)
});
crossroads.parse('/news/00012');
</pre>
<pre class="brush: js; gutter:false; toolbar:false">
crossroads.shouldTypecast = false; //default = false
crossroads.addRoute('/news/{id}', function(id){
    console.log(id); // "00012" (keep trailing zeroes)
});
crossroads.parse('/news/00012');
</pre>
                    <hr />

                    <h3 class="code" id="crossroads-version">crossroads.VERSION<em>:String</em></h3>
                    <p>
                        String representation of the <code>crossroads</code> version number (e.g. <code>&quot;0.6.0&quot;</code>).
                    </p>
                    <hr />

                    <h3 class="code" id="route-matched">Route.matched<em>:Signal</em></h3>
                    <p>Signal dispatched every time a request matches the route pattern.</p>
                    <p>
                        Signal handlers will receive all parameters captured by the Route pattern.
                    </p>
                    <h4>Example</h4>
<pre class="brush: js; gutter:false; toolbar:false">
var route1 = crossroads.addRoute('/news/{id}');
route1.matched.add(function(id){
  console.log('handler 1: '+ id);
});
route1.matched.add(function(id){
  console.log('handler 2: '+ id);
});
crossroads.parse('/news/123'); //will trigger both handlers of `route1`
</pre>
                    <p>
                        <b>See also:</b> <a href="#route-switched">Route.switched</a>, <a href="#crossroads-should_typecast">crossroads.shouldTypecast</a>
                    </p>

                    <hr />
                    <h3 class="code" id="route-switched">Route.switched<em>:Signal</em></h3>
                    <p>Signal dispatched every time a request "leaves" the route.</p>
                    <p>
                        Signal handlers will receive the "request" string passed to <code>crossroads.parse()</code>
                    </p>
                    <p>
                        <b>See also:</b> <a href="#route-matched">Route.matched</a>
                    </p>
                    <hr />


                    <h3 class="code" id="route-rules">Route.rules<em>:Object</em></h3>
                    <p>
                        Object used to configure parameters/segments validation rules.
                    </p>
                    <p>
                        Validation rules can be an Array, a RegExp or a Function:
                    </p>
                    <ul class="simpleList">
                        <li>If rule is an Array, crossroads will try to match a request segment against items of the Array, if item is found parameter is valid.</li>
                        <li>If rule is a RegExp, crossroads will try to match a request segment against it.</li>
                        <li>If rule is a Function, crossroads will base validation on value returned by Function (should return a Boolean).</li>
                    </ul>
                    <p>
                        Rules <em>keys</em> should match route pattern segment names or should be a numeric value,
                        starting at index 0, that match each RegExp capturing group or path segment.
                    </p>
                    <p>
                        The rules object can also contain 2 special properties <code>request_</code> and <code>normalize_</code>:
                    </p>
                    <dl class="simpleList doc">
                        <dt><code>normalize_</code><em>:Function(request, values)</em></dt>
                            <dd>
                                Used to modify/normalize values before dispatching the <a href="#route-matched">matched</a> Signal.
                                It should return an Array with parameters that should be passed to listeners.
                            </dd>
                            <dd>
                                Can be used to create route aliases and also to convert data format.
                            </dd>
                            <dd>
                                Works exactly like <a href="#crossroads-normalize_fn">crossroads.normalizeFn</a>. It will overwrite <code>crossroads.normalizeFn</code> if present.
                            </dd>
                        <dt><code>request_</code><em>:*</em></dt>
                            <dd>
                                Rule used to validate whole request.
                            </dd>
                    </dl>
                    <p>
                        It is important to note that values and requests are typecasted if <a href="#crossroads-should_typecast">Router.shouldTypecast = true</a> <small>(it's false by default)</small>.
                    </p>
                    <p>
                        All the properties of the rules object are optional, you can specify only the segments you want to validate.
                    </p>
                    <h4>Example</h4>
<pre class="brush: js; gutter:false; toolbar:false">
var route1 = crossroads.addRoute('/{section}/{date}/{id}');

//note that `rules` keys have the same as route pattern segments
route1.rules = {

    //match only values inside array
    section : ['blog', 'news', '123'],

    //validate dates on the format "yyyy-mm-dd"
    date : /^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,

    /*
     * @param {string|number|boolean} value  Request segment value.
     * @param {string} request  Value passed to crossroads.parse method.
     * @param {object} valuesObj  Values of all pattern segments.
     * @return {boolean} If segment value is valid.
     */
    id : function(value, request, valuesObj){
        if(isNaN(value)){
            return false;
        }else{
            if(+value &lt; 100 &amp;&amp; valuesObj.section == 'blog'){
                return true;
            }else if(valuesObj.section == 'news'){
                return true;
            }else{
                return false;
            }
        }
    },

    /**
     * `request_` is a special rule used to validate whole request
     * It can be an Array, RegExp or Function.
     * Note that request will be typecasted if value is a boolean
     * or number and crossroads.shouldTypecast = true (default = false).
     */
    request_ : function(request){
        return (request != '123');
    },

    /**
     * Normalize params that should be dispatched by Route.matched signal
     * @param {*} request Value passed to crossroads.parse method.
     * @param {object} vals All segments captured by route, it also have a
     *  special property `vals_` which contains all the captured values and
     *  also a property `request_`.
     * @return {array} Array containing parameters.
     */
    normalize_ : function(request, vals){
        //ignore "date" since it isn't important for the application
        return [vals.section, vals.id];
    }

};

route1.match("/foo/2011-05-04/2"); //false. {section} isn't valid
route1.match("/blog/20110504/2"); //false. {date} isn't valid
route1.match("/blog/2011-05-04/999"); //false. {id} is too high
route1.match("/blog/2011-05-04/2"); //true. all segments validate
</pre>
<h4>Example RegExp pattern</h4>
<pre class="brush: js; gutter:false; toolbar:false">
var route1 = crossroads.addRoute(/([\-\w]+)\/([\-\w]+)\/([\-\w]+)/);

//note that `rules` keys represent capturing group index
route1.rules = {
  '0' : ['blog', 'news', '123'],
  '1' : /^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,
  '2' : function(value, request, valuesObj){
          return ! isNaN(value);
        }
};

route1.match("/foo/2011-05-04/2"); //false. {0} isn't valid
route1.match("/blog/20110504/2"); //false. {1} isn't valid
route1.match("/blog/2011-05-04/abc"); //false. {2} isn't numeric
route1.match("/blog/2011-05-04/2"); //true. all segments validate
</pre>
                    <hr />

                    <h3 class="code" id="route-greedy">Route.greedy:<em>Boolean</em></h3>
                    <p>
                        If crossroads should try to match this Route even after matching another Route.
                    </p>
                    <p>
                        Default value is <code>false</code>.
                    </p>
                    <p>
                        Crossroads will trigger all &quot;greedy&quot; Routes that matches the
                        request during <a href="#crossroads-parse">parse</a>.
                    </p>
<h4>Example</h4>
<pre class="brush: js; gutter:false; toolbar:false">
var projectsRoute = crossroads.addRoute('/projects/:id:');
projectsRoute.add(console.log, console);
projectsRoute.greedy = true; // greedy!

var projectDetailRoute = crossroads.addRoute('/projects/{id}', null, 2);
projectDetailRoute.add(console.log, console);

//match `projectsRoute`
crossroads.parse('/projects');

//match `projectDetailRoute` (priority 2) than `projectsRoute`
crossroads.parse('/projects/123');
</pre>
                    <hr />

                    <h3 class="code" id="route-dispose">Route.dispose()</h3>
                    <p>
                        Remove route from crossroads and destroy it, releasing memory.
                    </p>
                    <hr />

                    <h3 class="code" id="route-match">Route.match(<em>request</em>):<em>Boolean</em></h3>
                    <p>
                        Test if Route matches against request. Return <code>true</code> if request validate against route rules and pattern.
                    </p>
                    <h4>Example</h4>
<pre class="brush: js; gutter:false; toolbar:false">
var route1 = crossroads.addRoute('/news/{id}');
route1.match('/foo/bar'); //false
route1.match('/news/123'); //true
route1.match('/news/foo-bar'); //true
</pre>
                    <hr />

                    <h2>Examples</h2>
                    <p>
                        If you want to see more usage examples check the <a href="https://github.com/millermedeiros/crossroads.js/wiki/Examples">examples wiki page</a> and also the <a href="https://github.com/millermedeiros/crossroads.js/blob/master/dev/tests/">unit tests</a>.
                    </p>
                </div>
            </section>
            <section id="download">
                <div class="ribbon">
                    <h1 class="innerwrapper">Download</h1>
                </div>
                <div class="innerwrapper">
                    <p>
                        You can download this project in either <a href="https://github.com/millermedeiros/crossroads.js/zipball/master">zip</a> or <a href="https://github.com/millermedeiros/crossroads.js/tarball/master">tar</a> formats. You can also clone the project with <a href="http://git-scm.com/">Git</a> by running:
                    </p>
<pre class="syntaxhighlighter">
$ git clone git://github.com/millermedeiros/crossroads.js.git
</pre>
                    <p>
                    Or install it on <a href="http://nodejs.org/">node.js</a> using <a href="http://npmjs.org/">npm</a>:
                    </p>
<pre class="syntaxhighlighter">
$ npm install crossroads
</pre>
                </div>
            </section>
            <footer id="footer">
                <div class="innerwrapper">
                    &copy; Copyright 2011, <a href="http://blog.millermedeiros.com/">Miller Medeiros</a>.
                </div>
            </footer>
            <a class="fork"href="http://github.com/millermedeiros/crossroads.js">
                <img alt="Fork me on GitHub" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
            </a>
        </div>
        <script src="scripts/main.js"></script>
    </body>
</html>
